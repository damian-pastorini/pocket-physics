parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"c4UV":[function(require,module,exports) {
module.exports=function(n,o,e){document.addEventListener("keydown",function(t){t.which==(e||27)&&(n(),console.log(o||"HALT IN THE NAME OF SCIENCE!"))})};
},{}],"pTQG":[function(require,module,exports) {
"use strict";function r(r,t){return{x:r||0,y:t||0}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.v2=r,exports.translate=exports.perpDot=exports.normal=exports.normalize=exports.magnitude=exports.distance2=exports.distance=exports.scale=exports.dot=exports.sub=exports.add=exports.set=exports.copy=void 0;var t=function(r,t){return r.x=t.x,r.y=t.y,r};exports.copy=t;var e=function(r,t,e){return r.x=t,r.y=e,r};exports.set=e;var o=function(r,t,e){return r.x=t.x+e.x,r.y=t.y+e.y,r};exports.add=o;var n=function(r,t,e){return r.x=t.x-e.x,r.y=t.y-e.y,r};exports.sub=n;var x=function(r,t){return r.x*t.x+r.y*t.y};exports.dot=x;var s=function(r,t,e){return r.x=t.x*e,r.y=t.y*e,r};exports.scale=s;var a=function(r,t){var e=r.x-t.x,o=r.y-t.y;return Math.sqrt(e*e+o*o)};exports.distance=a;var p=function(r,t){var e=r.x-t.x,o=r.y-t.y;return e*e+o*o};exports.distance2=p;var u=function(r){var t=r.x,e=r.y;return Math.sqrt(t*t+e*e)};exports.magnitude=u;var y=function(r,t){var e=t.x,o=t.y,n=e*e+o*o;return n>0&&(n=1/Math.sqrt(n),r.x=t.x*n,r.y=t.y*n),r};exports.normalize=y;var i=function(r,t,e){return r.y=e.x-t.x,r.x=t.y-e.y,y(r,r)};exports.normal=i;var c=function(r,t){return r.x*t.y-r.y*t.x};exports.perpDot=c;var v=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var n=0;n<t.length;n++){var x=t[n];o(x,x,r)}};exports.translate=v;
},{}],"mPXB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.accelerate=void 0;var e=require("./v2"),c=function(c,r){c.cpos.x+=c.acel.x*r*r*.001,c.cpos.y+=c.acel.y*r*r*.001,(0,e.set)(c.acel,0,0)};exports.accelerate=c;
},{"./v2":"pTQG"}],"MuB2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.collideCircleCircle=void 0;var s=require("./v2"),o={x:0,y:0},p={x:0,y:0},x={x:0,y:0},c={x:0,y:0},y=function(y,e,r,i,t,l,a,u){var d=(0,s.distance2)(y.cpos,i.cpos),v=e+t;(0,s.sub)(o,y.cpos,y.ppos),(0,s.sub)(p,i.cpos,i.ppos),(0,s.sub)(x,y.cpos,i.cpos);var b=Math.sqrt(d),n=(b-v)/b;0===b&&(n=1);var C=r>0?r:1,f=l>0?l:1,q=C+f;if(c.x=x.x*n*(f/q),c.y=x.y*n*(f/q),r>0&&(0,s.sub)(y.cpos,y.cpos,c),c.x=x.x*n*(C/q),c.y=x.y*n*(C/q),l>0&&(0,s.add)(i.cpos,i.cpos,c),a){var M=(u=u||1)*(x.x*o.x+x.y*o.y)/(d||1),_=u*(x.x*p.x+x.y*p.y)/(d||1);o.x+=(_*x.x-M*x.x)/(C||1),p.x+=(M*x.x-_*x.x)/(f||1),o.y+=(_*x.y-M*x.y)/(C||1),p.y+=(M*x.y-_*x.y)/(f||1),r>0&&(0,s.set)(y.ppos,y.cpos.x-o.x,y.cpos.y-o.y),l>0&&(0,s.set)(i.ppos,i.cpos.x-p.x,i.cpos.y-p.y)}};exports.collideCircleCircle=y;
},{"./v2":"pTQG"}],"+rY2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.collideCircleEdge=u;var p=require("./v2"),s=require("./collide-circle-circle"),o=(0,p.v2)(),c=(0,p.v2)(),e=(0,p.v2)(),l=(0,p.v2)(),a=(0,p.v2)(),i=(0,p.v2)(),v=(0,p.v2)(),r=(0,p.v2)(),d={cpos:(0,p.v2)(),ppos:(0,p.v2)()},t={cpos:(0,p.v2)(),ppos:(0,p.v2)()};function u(e,a,i,r,d,t,u,n,f){(0,p.sub)(c,t.cpos,r.cpos),(0,p.normalize)(o,c),(0,p.sub)(l,e.cpos,r.cpos);var b=(0,p.dot)(c,l),y=(0,p.dot)(c,c),h=Math.sqrt(y);if(!(b<0||b>y)){var x=b/y,g=1-x;if((0,p.scale)(v,o,x*h),(0,p.add)(v,v,r.cpos),!((0,p.distance)(v,e.cpos)>a)){var C=g*i,P=x*i,m={cpos:(0,p.v2)(),ppos:(0,p.v2)()},M={cpos:(0,p.v2)(),ppos:(0,p.v2)()};(0,p.scale)(m.cpos,o,x*h),(0,p.sub)(m.cpos,e.cpos,m.cpos),(0,p.scale)(m.ppos,o,x*h),(0,p.sub)(m.ppos,e.ppos,m.ppos),(0,p.scale)(M.cpos,o,g*h),(0,p.add)(M.cpos,e.cpos,M.cpos),(0,p.scale)(M.ppos,o,g*h),(0,p.add)(M.ppos,e.ppos,M.ppos);var S={cpos:(0,p.v2)(),ppos:(0,p.v2)()},q={cpos:(0,p.v2)(),ppos:(0,p.v2)()};(0,p.copy)(S.cpos,m.cpos),(0,p.copy)(S.ppos,m.ppos),(0,p.copy)(q.cpos,M.cpos),(0,p.copy)(q.ppos,M.ppos);(0,s.collideCircleCircle)(m,a,C,r,0,d,n,f),(0,s.collideCircleCircle)(M,a,P,t,0,u,n,f);var E={cpos:(0,p.v2)(),ppos:(0,p.v2)()},I={cpos:(0,p.v2)(),ppos:(0,p.v2)()};(0,p.sub)(E.cpos,m.cpos,S.cpos),(0,p.sub)(I.cpos,M.cpos,q.cpos),(0,p.scale)(E.cpos,E.cpos,g),(0,p.scale)(I.cpos,I.cpos,x),(0,p.add)(e.cpos,e.cpos,E.cpos),(0,p.add)(e.cpos,e.cpos,I.cpos),n&&((0,p.sub)(E.ppos,m.ppos,S.ppos),(0,p.sub)(I.ppos,M.ppos,q.ppos),(0,p.scale)(E.ppos,E.ppos,g),(0,p.scale)(I.ppos,I.ppos,x),(0,p.add)(e.ppos,e.ppos,E.ppos),(0,p.add)(e.ppos,e.ppos,I.ppos))}}}function n(p,s,o){void 0===s&&(s=[]),void 0===o&&(o=[]);var c=document.createElement("canvas"),e=c.getContext("2d");document.body.appendChild(c),c.width=800,c.height=800;for(var l=0;l<s.length;l++){var a=s[l];e.fillStyle="rgba(255, 0, 0, 0.5)",e.beginPath(),e.arc(a.ppos.x,a.ppos.y,a.radius,0,2*Math.PI,!1),e.fill(),e.fillStyle="rgba(0, 0, 0, 0.5)",e.beginPath(),e.arc(a.cpos.x,a.cpos.y,a.radius,0,2*Math.PI,!1),e.fill()}for(l=0;l<o.length;l++){var i=o[l],v=i[0],r=i[1];e.fillStyle="purple",e.fillRect(r.x,r.y,1,1),e.fillText(v+" ("+r.x+","+r.y+")",r.x+1,r.y+1)}e.fillStyle="black",e.fillText(p,10,10)}
},{"./v2":"pTQG","./collide-circle-circle":"MuB2"}],"zfJE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.collisionResponseAABB=void 0;var e=require("./v2"),s=(0,e.v2)(),a=(0,e.v2)(),v=(0,e.v2)(),t=(0,e.v2)(),d=(0,e.v2)(),o=(0,e.v2)(),l=(0,e.v2)(),c=(0,e.v2)(),r=(0,e.v2)(),i=(0,e.v2)(),u=(0,e.v2)(),n=(0,e.v2)(),b=(0,e.v2)(),p=(0,e.v2)(),x=1e-4,y=function(y,m,A,B,f,g,z,M,R,_,h,j,q,O,P){(0,e.set)(s,0,0),(0,e.set)(a,0,0),(0,e.set)(v,0,0),(0,e.set)(t,0,0),(0,e.set)(d,0,0),(0,e.set)(o,0,0),(0,e.set)(l,0,0),(0,e.set)(c,0,0),(0,e.set)(r,0,0),(0,e.set)(i,0,0),(0,e.set)(u,0,0),(0,e.set)(n,0,0),(0,e.set)(b,0,0),(0,e.set)(p,0,0),!q||0===q.x&&0===q.y?((0,e.sub)(s,y,z),(0,e.normalize)(s,s)):(0,e.set)(s,q.x,q.y),(0,e.scale)(a,s,-1);var k=A+R,w=1+(B>_?B:_);(0,e.sub)(v,y,m);var C=(0,e.dot)(s,v);(0,e.scale)(t,s,C),(0,e.sub)(d,v,t),(0,e.sub)(o,z,M);var D=(0,e.dot)(a,o);(0,e.scale)(l,a,D),(0,e.sub)(c,o,l),(0,e.scale)(u,t,(A-R)/k),(0,e.scale)(n,l,w*R/k),(0,e.add)(r,u,n),(0,e.add)(r,r,d),(0,e.scale)(b,t,w*A/k),(0,e.scale)(p,l,(R-A)/k),(0,e.add)(i,b,p),(0,e.add)(i,i,c);var E=(0,e.add)((0,e.v2)(),r,i),F=(0,e.v2)();(0,e.scale)(F,s,(0,e.dot)(E,s));var G=(0,e.sub)((0,e.v2)(),E,F);(0,e.normalize)(G,G);var H=-(0,e.dot)(E,G);H/=1/(A+R);var I=Math.abs(H);if(I>x){var J=(0,e.magnitude)(d),K=(0,e.magnitude)(c),L=(0,e.v2)(),N=(0,e.v2)();I<J*f?(0,e.scale)(L,G,f):(0,e.scale)(L,G,-J*g),I<K*h?(0,e.scale)(N,G,h):(0,e.scale)(N,G,-K*j),(0,e.add)(r,r,L),(0,e.add)(i,i,N)}(0,e.copy)(O,r),(0,e.copy)(P,i)};exports.collisionResponseAABB=y;
},{"./v2":"pTQG"}],"MROi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.solveDistanceConstraint=e;var s=require("./v2");function e(e,o,c,p,a,r){void 0===r&&(r=1);var t=1/((o>0?o:1)||1),v=1/((p>0?p:1)||1),u=t+v,d=(0,s.sub)((0,s.v2)(),c.cpos,e.cpos),i=(0,s.magnitude)(d),n=(i-a)/i;(0,s.scale)(d,d,n/u);var l=(0,s.scale)((0,s.v2)(),d,t*r),b=(0,s.scale)((0,s.v2)(),d,v*r);o>0?(0,s.add)(e.cpos,e.cpos,l):p>0&&(0,s.sub)(c.cpos,c.cpos,l),p>0?(0,s.sub)(c.cpos,c.cpos,b):o>0&&(0,s.add)(e.cpos,e.cpos,b)}
},{"./v2":"pTQG"}],"6ujJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.solveDrag=void 0;var o=function(o,p){var s=(o.ppos.x-o.cpos.x)*p,e=(o.ppos.y-o.cpos.y)*p;o.ppos.x=o.cpos.x+s,o.ppos.y=o.cpos.y+e};exports.solveDrag=o;
},{}],"iXvS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.solveGravitation=s;var e=require("./v2"),o=(0,e.v2)();function s(s,a,r,t,c){if(void 0===c&&(c=.99),!(a<=0||t<=0)){var i,v,l=r.cpos.x-s.cpos.x,p=r.cpos.y-s.cpos.y;(0,e.set)(o,l,p),v=c*(a*t/((i=(0,e.magnitude)(o))*i)),(0,e.normalize)(o,o),(0,e.scale)(o,o,v),(0,e.add)(s.acel,s.acel,o)}}
},{"./v2":"pTQG"}],"aEct":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inertia=void 0;var e=require("./v2"),s=function(s){var o=2*s.cpos.x-s.ppos.x,p=2*s.cpos.y-s.ppos.y;(0,e.set)(s.ppos,s.cpos.x,s.cpos.y),(0,e.set)(s.cpos,o,p)};exports.inertia=s;
},{"./v2":"pTQG"}],"AvgD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.overlapAABBAABB=void 0;var e=require("./v2"),r=function(r,t,o,s,l,a,i,v,n){var u=l-r,A=i/2+o/2-Math.abs(u),B=a-t,h=v/2+s/2-Math.abs(B);if(A<=0)return null;if(h<=0)return null;if((0,e.set)(n.resolve,0,0),(0,e.set)(n.hitPos,0,0),(0,e.set)(n.normal,0,0),A<h){var x=u<0?-1:1;n.resolve.x=A*x,n.normal.x=x,n.hitPos.x=r+o/2*x,n.hitPos.y=a}else{var p=B<0?-1:1;n.resolve.y=h*p,n.normal.y=p,n.hitPos.x=l,n.hitPos.y=t+s/2*p}return n};exports.overlapAABBAABB=r;
},{"./v2":"pTQG"}],"/3nj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.overlapCircleCircle=void 0;var e=function(e,r,o,t,i,l){var c=t-e,p=i-r,s=o+l;return c*c+p*p<s*s};exports.overlapCircleCircle=e;
},{}],"k8bf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.segmentIntersection=r;var e=require("./v2"),x=(0,e.v2)(),y=(0,e.v2)();function r(r,t,s,u,n){(0,e.sub)(x,t,r),(0,e.sub)(y,u,s);var o=(-x.y*(r.x-s.x)+x.x*(r.y-s.y))/(-y.x*x.y+x.x*y.y),v=(y.x*(r.y-s.y)-y.y*(r.x-s.x))/(-y.x*x.y+x.x*y.y);return o>=0&&o<=1&&v>=0&&v<=1&&(n.x=r.x+v*x.x,n.y=r.y+v*x.y,!0)}
},{"./v2":"pTQG"}],"pvJA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rewindToCollisionPoint=c;var s=require("./v2"),e=require("./segment-intersection"),o=(0,s.v2)(),p=(0,s.v2)(),i=(0,s.v2)(),n=(0,s.v2)(),r=(0,s.v2)(),t=(0,s.v2)();function c(c,u,v,a){return(0,s.sub)(i,c.cpos,c.ppos),(0,s.normalize)(n,i),(0,s.scale)(r,n,u),(0,s.add)(t,r,c.cpos),!!(0,e.segmentIntersection)(t,c.ppos,v.cpos,a.cpos,o)&&((0,s.sub)(p,t,o),(0,s.sub)(c.cpos,c.cpos,p),(0,s.sub)(c.ppos,c.ppos,p),!0)}function u(s){isNaN(s.x)||isNaN(s.y)}
},{"./v2":"pTQG","./segment-intersection":"k8bf"}],"0afW":[function(require,module,exports) {

},{}],"7lMI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.projectPointEdge=i;var e=require("./v2"),t=(0,e.v2)(),o=(0,e.v2)(),r=(0,e.v2)(),d=(0,e.v2)();function i(i,a,n,s){(0,e.sub)(t,a,n),(0,e.normalize)(o,t),(0,e.normal)(s.edgeNormal,a,n),(0,e.sub)(r,i,a);var c=(0,e.dot)(t,r),p=(0,e.dot)(t,t),u=Math.sqrt(p),v=c/p;(0,e.scale)(s.projectedPoint,o,v*u),(0,e.add)(s.projectedPoint,s.projectedPoint,a),(0,e.sub)(d,i,s.projectedPoint);var l=(0,e.dot)(d,s.edgeNormal),j=(0,e.distance)(i,s.projectedPoint);return s.distance=j,s.similarty=l,s.t=v,s}
},{"./v2":"pTQG"}],"+fUd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./accelerate");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./collide-circle-circle");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./collide-circle-edge");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./collision-response-aabb");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var o=require("./solve-distance-constraint");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var u=require("./solve-drag");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var c=require("./solve-gravitation");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var i=require("./inertia");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var a=require("./overlap-aabb-aabb");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var f=require("./overlap-circle-circle");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var l=require("./rewind-to-collision-point");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var s=require("./segment-intersection");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var d=require("./v2");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var b=require("./common-types");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var p=require("./project-point-edge");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});
},{"./accelerate":"mPXB","./collide-circle-circle":"MuB2","./collide-circle-edge":"+rY2","./collision-response-aabb":"zfJE","./solve-distance-constraint":"MROi","./solve-drag":"6ujJ","./solve-gravitation":"iXvS","./inertia":"aEct","./overlap-aabb-aabb":"AvgD","./overlap-circle-circle":"/3nj","./rewind-to-collision-point":"pvJA","./segment-intersection":"k8bf","./v2":"pTQG","./common-types":"0afW","./project-point-edge":"7lMI"}],"R1Yz":[function(require,module,exports) {
"use strict";var s=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};exports.__esModule=!0;var e=s(require("science-halt")),o=require("../src");exports.start=function(){var s=document.createElement("canvas"),p=s.getContext("2d");s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);var t={cpos:o.v2(350,90),ppos:o.v2(349,80),acel:o.v2(),w:100,h:150,mass:10},a={cpos:o.v2(350,600),ppos:o.v2(350,600),acel:o.v2(),w:100,h:150,mass:10},c=[],r={resolve:o.v2(),hitPos:o.v2(),normal:o.v2()};c.push(t,a);var l=!0;function i(s,e){e.clearRect(0,0,e.canvas.width,e.canvas.height);for(var o=0;o<s.length;o++){var p=s[o];e.fillStyle="red",e.fillRect(p.ppos.x-p.w/2,p.ppos.y-p.h/2,p.w,p.h),e.fillStyle="black",e.fillRect(p.cpos.x-p.w/2,p.cpos.y-p.h/2,p.w,p.h)}}e.default(function(){return l=!1}),function s(){for(var e=0;e<c.length;e++){var n=c[e];o.accelerate(n,1)}if(o.overlapAABBAABB(t.cpos.x,t.cpos.y,t.w,t.h,a.cpos.x,a.cpos.y,a.w,a.h,r)){i(c,p);var v=o.scale(o.v2(),r.resolve,.5);o.add(a.cpos,a.cpos,v),o.add(a.ppos,a.ppos,v),o.sub(t.cpos,t.cpos,v),o.sub(t.ppos,t.ppos,v),i(c,p);var h=o.v2(),u=o.v2();o.collisionResponseAABB(t.cpos,t.ppos,t.mass,1,.9,.01,a.cpos,a.ppos,a.mass,1,.9,.01,o.v2(),h,u),o.sub(t.ppos,t.cpos,h),o.sub(a.ppos,a.cpos,u),i(c,p)}for(e=0;e<c.length;e++){n=c[e];o.inertia(n)}i(c,p),l&&window.requestAnimationFrame(s)}()};
},{"science-halt":"c4UV","../src":"+fUd"}],"qzHv":[function(require,module,exports) {
"use strict";var s=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};exports.__esModule=!0;var e=s(require("science-halt")),o=require("../src/index");exports.start=function(){var s=document.createElement("canvas"),t=s.getContext("2d");s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);for(var a=[],i=0;i<25;i++){var r=s.width/2,p=s.height/2,c=.5*Math.min(r,p),n=r+Math.cos(i)*c,h=p+Math.sin(i)*c;a.push(v(n,h))}var l={cpos:o.v2(s.width/2,s.height/2),ppos:o.v2(s.width/2,s.height/2),acel:o.v2(),mass:1e5},d=!0;function v(s,e){return{id:"id-"+Math.floor(1e7*Math.random()),cpos:o.v2(s,e),ppos:o.v2(s,e),acel:o.v2(),mass:10,w:10,h:10}}function u(s,e){e.clearRect(0,0,e.canvas.width,e.canvas.height);for(var o=0;o<s.length;o++){var t=s[o];e.fillStyle="red",e.fillRect(t.ppos.x-t.w/2,t.ppos.y-t.h/2,t.w,t.h),e.fillStyle="black",e.fillRect(t.cpos.x-t.w/2,t.cpos.y-t.h/2,t.w,t.h)}}e.default(function(){return d=!1}),function s(){for(var e=0;e<a.length;e++){var i=a[e];o.distance(i.cpos,l.cpos)>100&&o.solveGravitation(i,i.mass,l,l.mass)}for(e=0;e<a.length;e++){i=a[e];o.accelerate(i,1)}var r=[],p={resolve:o.v2(),hitPos:o.v2(),normal:o.v2()};for(e=0;e<a.length;e++)for(var c=e+1;c<a.length;c++){var n=a[e],h=a[c];if(o.overlapAABBAABB(n.cpos.x,n.cpos.y,n.w,n.h,h.cpos.x,h.cpos.y,h.w,h.h,p)&&-1===r.indexOf(n.id+","+h.id)&&-1===r.indexOf(h.id+","+n.id)){var v=o.scale(o.v2(),p.resolve,.5);o.add(h.cpos,h.cpos,v),o.add(h.ppos,h.ppos,v),o.sub(n.cpos,n.cpos,v),o.sub(n.ppos,n.ppos,v),u(a,t);var f=o.v2(),m=o.v2();o.collisionResponseAABB(n.cpos,n.ppos,n.mass,1,.9,.01,h.cpos,h.ppos,h.mass,1,.9,.01,o.v2(),f,m),o.sub(n.ppos,n.cpos,f),o.sub(h.ppos,h.cpos,m),u(a,t),r.push(n.id+","+h.id),r.push(h.id+","+n.id)}}for(e=0;e<a.length;e++){i=a[e];o.inertia(i)}u(a,t),d&&window.requestAnimationFrame(s)}()};
},{"science-halt":"c4UV","../src/index":"+fUd"}],"bcb3":[function(require,module,exports) {
"use strict";var a=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};exports.__esModule=!0;var r=a(require("science-halt")),e=require("../src/index");exports.start=function(){var a=document.createElement("canvas"),s=a.getContext("2d");a.width=a.height=800,a.style.border="1px solid gray",document.body.appendChild(a);var t={x:400,y:400},i={cpos:e.copy(e.v2(),t),ppos:e.copy(e.v2(),t),acel:e.v2(),radius:20,mass:1e4},o=function(a,r,e){for(var s=[],t=0;t<e;t++){var i=Math.cos(t)*a.x+a.x,o=Math.sin(t)*a.y+a.y;s.push({cpos:{x:i,y:o},ppos:{x:i,y:o},acel:{x:0,y:0},radius:Math.max(Math.abs(Math.cos(t)+Math.sin(t))*r,10),mass:Math.max(1*Math.abs(Math.cos(t)+Math.sin(t)),1)})}return s}(t,15,40),c=[];o.unshift(i);var n=!0;r.default(function(){return n=!1}),function a(){e.v2();for(var r=0;r<o.length;r++){(h=o[r])!==i&&e.solveGravitation(h,h.mass,i,i.mass),e.accelerate(h,16)}!function(a,r){a.length=0;for(var s=0;s<r.length;s++)for(var t=r[s],i=s+1;i<r.length;i++){var o=r[i];e.overlapCircleCircle(t.cpos.x,t.cpos.y,t.radius,o.cpos.x,o.cpos.y,o.radius)&&a.push(t,o)}}(c,o);for(r=0;r<c.length;r+=2){var t=c[r],l=c[r+1];e.collideCircleCircle(t,t.radius,t.mass,l,l.radius,l.mass,!1,.1)}for(r=0;r<o.length;r++){var h=o[r];e.inertia(h)}for(r=0;r<c.length;r+=2){t=c[r],l=c[r+1];e.collideCircleCircle(t,t.radius,t.mass,l,l.radius,l.mass,!0,.1)}!function(a,r){r.clearRect(0,0,r.canvas.width,r.canvas.height);for(var e=0;e<a.length;e++){var s=a[e];r.fillStyle="red",r.beginPath(),r.arc(s.ppos.x,s.ppos.y,s.radius,0,2*Math.PI,!1),r.fill(),r.fillStyle="black",r.beginPath(),r.arc(s.cpos.x,s.cpos.y,s.radius,0,2*Math.PI,!1),r.fill()}}(o,s),n&&window.requestAnimationFrame(a)}()};
},{"science-halt":"c4UV","../src/index":"+fUd"}],"rnWH":[function(require,module,exports) {
"use strict";var o=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};exports.__esModule=!0;var t=o(require("science-halt")),i=require("../src/index");exports.start=function(){var o=document.createElement("canvas"),n=o.getContext("2d");o.width=o.height=800,o.style.border="1px solid gray",document.body.appendChild(o);var s=[],e=[],p=[],a=function(o,t,n,s){for(var e=[],p=[],a=[],r=[i.v2(o,t),i.v2(o+n,t),i.v2(o+n,t+s),i.v2(o,t+s)],l=0;l<r.length;l++){var c=r[l],u=0===p.length?null:p[l-1],h={cpos:i.copy(i.v2(),c),ppos:i.copy(i.v2(),c),acel:i.v2(0,0),mass:0===l?-1:1,radius:1};u&&(e.push({point1:u,point2:h}),a.push({point1:u,point2:h,goal:i.distance(c,u.cpos)})),p.push(h)}return e.push({point1:p[p.length-1],point2:p[0]}),a.push({point1:p[p.length-1],point2:p[0],goal:i.distance(p[p.length-1].cpos,p[0].cpos)}),a.push({point1:p[0],point2:p[2],goal:i.distance(p[0].cpos,p[2].cpos)}),{lines:e,circles:p,constraints:a}}(300,200,100,200);s.push.apply(s,a.circles),e.push.apply(e,a.lines),p.push.apply(p,a.constraints),s.push({cpos:i.v2(500,390),ppos:i.v2(510,390),acel:i.v2(0,0),mass:100,radius:10});var r=!0;function l(o,t,n){void 0===n&&(n=.9);for(var s=0;s<o.length;s++)for(var e=o[s],p=s+1;p<o.length;p++){var a=o[p];i.overlapCircleCircle(e.cpos.x,e.cpos.y,e.radius,a.cpos.x,a.cpos.y,a.radius)&&i.collideCircleCircle(e,e.radius,e.mass,a,a.radius,a.mass,t,n)}}function c(o,t,n,s){void 0===s&&(s=.9);for(var e=0;e<o.length;e++)for(var p=o[e],a=0;a<t.length;a++){var r=t[a];p.point1!=r&&p.point2!==r&&(n||i.rewindToCollisionPoint(r,r.radius,p.point1,p.point2),i.collideCircleEdge(r,r.radius,r.mass,p.point1,p.point1.mass,p.point2,p.point2.mass,n,s))}}t.default(function(){return r=!1}),function o(){for(var t=0;t<s.length;t++){var a=s[t];i.accelerate(a,16)}for(t=0;t<2;t++)for(var u=0;u<p.length;u++){var h=p[u];i.solveDistanceConstraint(h.point1,h.point1.mass,h.point2,h.point2.mass,h.goal)}l(s,!1),c(e,s,!1);for(t=0;t<s.length;t++){a=s[t];i.inertia(a)}l(s,!0),c(e,s,!0),function(o,t,i){i.clearRect(0,0,i.canvas.width,i.canvas.height);for(var n=0;n<o.length;n++){var s=o[n];i.fillStyle="red",i.beginPath(),i.arc(s.ppos.x,s.ppos.y,s.radius,0,2*Math.PI,!1),i.fill(),i.fillStyle="black",i.beginPath(),i.arc(s.cpos.x,s.cpos.y,s.radius,0,2*Math.PI,!1),i.fill()}for(var n=0;n<t.length;n++){var e=t[n];i.strokeStyle="red",i.beginPath(),i.moveTo(e.point1.ppos.x,e.point1.ppos.y),i.lineTo(e.point2.ppos.x,e.point2.ppos.y),i.stroke(),i.beginPath(),i.strokeStyle="black",i.moveTo(e.point1.cpos.x,e.point1.cpos.y),i.lineTo(e.point2.cpos.x,e.point2.cpos.y),i.stroke()}}(s,e,n),r&&window.requestAnimationFrame(o)}()};
},{"science-halt":"c4UV","../src/index":"+fUd"}],"seMj":[function(require,module,exports) {
"use strict";var o=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};exports.__esModule=!0;var t=o(require("science-halt")),e=require("../src");exports.start=function(){var o=document.createElement("canvas"),i=o.getContext("2d");o.tabIndex=1,o.width=o.height=800,o.style.border="1px solid gray",document.body.appendChild(o);var s={cpos:e.v2(600,0),ppos:e.v2(600,0),acel:e.v2(0,0),mass:1,radius:20},a={point1:{cpos:e.v2(100,300),ppos:e.v2(100,300),acel:e.v2(0,0),mass:-1,radius:0},point2:{cpos:e.v2(700,300),ppos:e.v2(700,300),acel:e.v2(0,0),mass:-1,radius:0},goal:500},n=[s,a.point1,a.point2],p=(e.v2(),!0);t.default(function(){return p=!1}),function o(){e.add(s.acel,s.acel,e.v2(0,.8));for(var t=0;t<n.length;t++){var r=n[t];e.accelerate(r,16)}e.rewindToCollisionPoint(s,s.radius,a.point1,a.point2),e.collideCircleEdge(s,s.radius,s.mass,a.point1,a.point1.mass,a.point2,a.point2.mass,!1,.9);for(t=0;t<n.length;t++){r=n[t];e.inertia(r)}e.collideCircleEdge(s,s.radius,s.mass,a.point1,a.point1.mass,a.point2,a.point2.mass,!0,.9);for(t=0;t<5;t++)e.solveDistanceConstraint(a.point1,a.point1.mass,a.point2,a.point2.mass,a.goal);!function(o,t,e){e.clearRect(0,0,e.canvas.width,e.canvas.height);for(var i=0;i<o.length;i++){var s=o[i];e.fillStyle="red",e.beginPath(),e.arc(s.ppos.x,s.ppos.y,s.radius,0,2*Math.PI,!1),e.fill(),e.fillStyle="black",e.beginPath(),e.arc(s.cpos.x,s.cpos.y,s.radius,0,2*Math.PI,!1),e.fill()}for(var i=0;i<t.length;i++){var a=t[i];e.strokeStyle="red",e.beginPath(),e.moveTo(a.point1.ppos.x,a.point1.ppos.y),e.lineTo(a.point2.ppos.x,a.point2.ppos.y),e.stroke(),e.beginPath(),e.strokeStyle="black",e.moveTo(a.point1.cpos.x,a.point1.cpos.y),e.lineTo(a.point2.cpos.x,a.point2.cpos.y),e.stroke()}}(n,[a],i),p&&window.requestAnimationFrame(o)}()};
},{"science-halt":"c4UV","../src":"+fUd"}],"krc/":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var t=e(require("science-halt")),a=require("../src");exports.start=function(){var e=document.createElement("canvas"),o=e.getContext("2d");e.tabIndex=1,e.width=e.height=800,e.style.border="1px solid gray",document.body.appendChild(e);var s={cpos:a.v2(400,0),ppos:a.v2(400,0),acel:a.v2(0,0),width:50,height:75,mass:1},r={cpos:a.v2(400,700),ppos:a.v2(400,700),acel:a.v2(0,0),width:800,height:100,mass:Number.MAX_SAFE_INTEGER-1e5},i=[s,r],c={resolve:a.v2(),hitPos:a.v2(),normal:a.v2()},l=!0;t.default(function(){return l=!1});var n={};function p(e,t){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(var a=0;a<e.length;a++){var o=e[a];t.fillStyle="red",t.fillRect(o.ppos.x-o.width/2,o.ppos.y-o.height/2,o.width,o.height),t.fillStyle="black",t.fillRect(o.cpos.x-o.width/2,o.cpos.y-o.height/2,o.width,o.height)}}e.addEventListener("keydown",function(e){n[e.key]=!0,e.preventDefault()}),document.body.addEventListener("keyup",function(e){n[e.key]=!1,e.preventDefault()}),function e(){a.add(s.acel,s.acel,a.v2(0,9.8));for(var t=0;t<i.length;t++){var d=i[t];a.accelerate(d,16)}var h=a.overlapAABBAABB(s.cpos.x,s.cpos.y,s.width,s.height,r.cpos.x,r.cpos.y,r.width,r.height,c);if(h){var v=a.scale(a.v2(),c.resolve,-1);a.translate(v,s.cpos,s.ppos),p(i,o);var u=a.v2(),f=a.v2();a.collisionResponseAABB(s.cpos,s.ppos,s.mass,1,.9,.1,r.cpos,r.ppos,r.mass,1,.9,.1,c.normal,u,f),a.sub(s.ppos,s.cpos,u),s.ppos.y=s.cpos.y,p(i,o)}n.ArrowLeft&&a.add(s.acel,s.acel,a.v2(h?-5:-.5,0)),n.ArrowRight&&a.add(s.acel,s.acel,a.v2(h?5:.5,0)),h&&n.ArrowUp&&s.cpos.y-s.ppos.y==0&&a.add(s.acel,s.acel,a.v2(0,-98));for(t=0;t<i.length;t++){d=i[t];a.inertia(d)}p(i,o),l&&window.requestAnimationFrame(e)}()};
},{"science-halt":"c4UV","../src":"+fUd"}],"nHtR":[function(require,module,exports) {
"use strict";var o=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};exports.__esModule=!0;var t=o(require("science-halt")),i=require("../src");exports.start=function(){var o=document.createElement("canvas"),s=o.getContext("2d");o.tabIndex=1,o.width=o.height=800,o.style.border="1px solid gray",document.body.appendChild(o);var n=[],e=[],a=[],r=c([i.v2(50,50),i.v2(750,50),i.v2(750,750),i.v2(50,750)]),p=c([i.v2(500,400),i.v2(300,600)]);p.pop(),n.push.apply(n,r.concat(p)),a.push.apply(a,function(o,t,i,s){for(var n=[],e=0;e<s;e++){var a=o.x+Math.cos(e)*t,r=o.y+Math.sin(e)*t;n.push({cpos:{x:a,y:r},ppos:{x:a,y:r},acel:{x:0,y:0},radius:Math.max(Math.abs(Math.cos(e)+Math.sin(e))*i,10),mass:Math.max(1*Math.abs(Math.cos(e)+Math.sin(e)),1)})}return n}(i.v2(400,400),200,10,400)),[h(6,i.v2(300,100),15),h(3,i.v2(400,100),15),h(4,i.v2(600,100),15)].forEach(function(o){a.push.apply(a,o.circles),e.push.apply(e,o.constraints),n.push.apply(n,o.lines)});var l=!0;function c(o){for(var t=[],s=[],n=0;n<o.length;n++){var e=o[n],a=0===s.length?null:s[n-1],r={cpos:i.copy(i.v2(),e),ppos:i.copy(i.v2(),e),acel:i.v2(0,0),mass:-1,radius:1};if(a){var p={point1:a,point2:r};t.push(p)}s.push(r)}return t.push({point1:s[s.length-1],point2:s[0]}),t}function h(o,t,s){for(var n=[],e=[],a=[],r=0;r<o;r++){var p=t.x+Math.cos(r/o*Math.PI*2)*s,l=t.y+Math.sin(r/o*Math.PI*2)*s;e.push({cpos:{x:p,y:l},ppos:{x:p,y:l},acel:{x:0,y:0},radius:5,mass:5})}for(r=0;r<e.length;r++){var c=e[r],h=r===e.length-1?e[0]:e[r+1];n.push({point1:c,point2:h})}var u=function(o){for(var t=e[o],s=o,n=function(){var o=e[++s%e.length];return o===t?"break":void 0!==a.find(function(i){return i.point1===t&&i.point2===o||i.point2===t&&i.point1===o})?"break":void a.push({point1:t,point2:o,goal:i.distance(t.cpos,o.cpos)})};;){if("break"===n())break}};for(r=0;r<e.length;r++)u(r);return{circles:e,lines:n,constraints:a}}t.default(function(){return l=!1}),function o(){for(var t=0;t<a.length;t++){(g=a[t]).mass>0&&i.add(g.acel,g.acel,i.v2(0,.8)),i.accelerate(g,16)}for(t=0;t<5;t++)for(var c=0;c<e.length;c++){var h=e[c];i.solveDistanceConstraint(h.point1,h.point1.mass,h.point2,h.point2.mass,h.goal,1)}for(t=0;t<n.length;t++){var u=n[t],v=r.indexOf(u)>-1;for(c=0;c<a.length;c++){(g=a[c])!==u.point1&&g!==u.point2&&(v||i.rewindToCollisionPoint(g,g.radius,u.point1,u.point2),i.collideCircleEdge(g,g.radius,g.mass,u.point1,u.point1.mass,u.point2,u.point2.mass,!1,.9))}}for(t=0;t<a.length;t++){var d=a[t];for(c=t+1;c<a.length;c++){var f=a[c];i.overlapCircleCircle(d.cpos.x,d.cpos.y,d.radius,f.cpos.x,f.cpos.y,f.radius)&&i.collideCircleCircle(d,d.radius,d.mass,f,f.radius,f.mass,!1,.9)}}for(t=0;t<a.length;t++){var g=a[t];i.inertia(g)}for(t=0;t<n.length;t++)for(u=n[t],c=0;c<a.length;c++){(g=a[c])!==u.point1&&g!==u.point2&&i.collideCircleEdge(g,g.radius,g.mass,u.point1,u.point1.mass,u.point2,u.point2.mass,!0,.9)}for(t=0;t<a.length;t++)for(d=a[t],c=t+1;c<a.length;c++){f=a[c];i.overlapCircleCircle(d.cpos.x,d.cpos.y,d.radius,f.cpos.x,f.cpos.y,f.radius)&&i.collideCircleCircle(d,d.radius,d.mass,f,f.radius,f.mass,!0,.9)}for(t=0;t<r.length;t++){if((u=r[t])!==p[0])for(c=0;c<a.length;c++){g=a[c];var y={distance:Number.MIN_SAFE_INTEGER,similarty:0,t:Number.MIN_SAFE_INTEGER,projectedPoint:i.v2(),edgeNormal:i.v2()};if(i.projectPointEdge(g.cpos,u.point1.cpos,u.point2.cpos,y),!(y.similarty>0)){var m=i.v2();i.sub(m,y.projectedPoint,g.cpos),i.add(g.cpos,g.cpos,m)}}}!function(o,t,i,s){s.clearRect(0,0,s.canvas.width,s.canvas.height);for(var n=0;n<o.length;n++){var e=o[n];s.fillStyle="red",s.beginPath(),s.arc(e.ppos.x,e.ppos.y,e.radius,0,2*Math.PI,!1),s.fill(),s.fillStyle="black",s.beginPath(),s.arc(e.cpos.x,e.cpos.y,e.radius,0,2*Math.PI,!1),s.fill()}for(var n=0;n<t.length;n++){var a=t[n];s.strokeStyle="red",s.beginPath(),s.moveTo(a.point1.ppos.x,a.point1.ppos.y),s.lineTo(a.point2.ppos.x,a.point2.ppos.y),s.stroke(),s.beginPath(),s.strokeStyle="black",s.moveTo(a.point1.cpos.x,a.point1.cpos.y),s.lineTo(a.point2.cpos.x,a.point2.cpos.y),s.stroke()}for(var n=0;n<i.length;n++){var r=i[n];s.strokeStyle="magenta",s.beginPath(),s.moveTo(r.point1.ppos.x,r.point1.ppos.y),s.lineTo(r.point2.ppos.x,r.point2.ppos.y),s.stroke(),s.beginPath(),s.strokeStyle="purple",s.moveTo(r.point1.cpos.x,r.point1.cpos.y),s.lineTo(r.point2.cpos.x,r.point2.cpos.y),s.stroke()}}(a,n,e,s),l&&window.requestAnimationFrame(o)}()};
},{"science-halt":"c4UV","../src":"+fUd"}],"7QCb":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r.default=e,r};exports.__esModule=!0;var r=e(require("./aabb-overlap")),o=e(require("./aabb-soup")),l=e(require("./circle-collisions")),i=e(require("./circle-box-collision")),n=e(require("./edge-collision")),t=e(require("./platformer")),a=e(require("./bucket")),u=new URLSearchParams(window.location.search),s=u.get("demo"),c=new Map([["Bucket of Circles (Verlet)",a],["Circle Collisions (Verlet)",l],["Circle to Box Collision (Verlet)",i],["Single Edge Collision (Verlet)",n],["Platformer (AABB Impulse Model)",t],["AABB Overlap Demo (AABB Impulse Model)",r],["AABB Soup Demo (AABB Impulse Model)",o]]);if(s&&c.has(s))c.get(s).start();else{var d=Array.from(c.keys()),m=window.location.pathname+"?demo="+encodeURIComponent(name),p=function(e){return'\n    <li><a href="'+m+'">'+e+"</a></li>\n  "},f="\n    <ul>\n      "+d.map(function(e){return p(e)}).join("\n")+"\n    </ul>\n  ",B=document.createElement("div");B.innerHTML=f,document.body.appendChild(B)}
},{"./aabb-overlap":"R1Yz","./aabb-soup":"qzHv","./circle-collisions":"bcb3","./circle-box-collision":"rnWH","./edge-collision":"seMj","./platformer":"krc/","./bucket":"nHtR"}]},{},["7QCb"], null)
//# sourceMappingURL=examples.ee66fd58.js.map